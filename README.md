# HibernateConsoleApp

Простое CRUD консольное приложение на Java с использованием Hibernate и PostgreSQL для управления пользователями.

## Описание

Это учебное приложение демонстрирует работу с Hibernate без Spring Boot, используя классическую конфигурацию и DAO-слой. В приложении реализованы базовые операции создания, чтения, обновления и удаления (CRUD) сущностей User. Интерфейс — консольный, с простым меню и вводом данных.

**Основные технологии:**
- Hibernate ORM (без XML-конфигураций, только hibernate.properties)
- PostgreSQL в качестве базы данных
- Lombok для генерации кода (геттеры, сеттеры, конструкторы)
- Logback + SLF4J для логирования

## Функционал

- Добавление нового пользователя с проверкой уникальности email
- Редактирование пользователя по ID
- Удаление пользователя по ID
- Просмотр одного пользователя по ID
- Просмотр списка всех пользователей

## Структура проекта

```markdown
## Структура проекта

| Путь                       | Описание |
|----------------------------|----------|
| `src/main/java/model/`     | Сущность User с JPA-аннотациями |
| `src/main/java/dao/`       | UserDAO - методы работы с БД через Hibernate |
| `src/main/java/service/`   | Бизнес-логика приложения |
| `src/main/java/controller/`| Контроллер (связующий слой) |
| `src/main/java/console/`   | Консольный интерфейс |
| `src/main/java/util/`      | Вспомогательные классы (HibernateUtil) |
| `src/main/java/exceptions/`| Кастомные исключения |
| `src/main/resources/`      | Файлы конфигурации |
| ├── `hibernate.properties` | Настройки Hibernate |
| └── `logback.xml`          | Конфигурация логирования |
```
## Исключения

- `UserRemoveException` - кастомное исключение для обработки ошибок удаления пользователя

## Тестирование
## Юнит-тесты
В сервисном слое реализованы юнит-тесты с использованием JUnit 5 и Mockito.
Тесты изолируют бизнес-логику от DAO-слоя через мок-объекты, что позволяет проверить корректность работы методов добавления, обновления, удаления и поиска пользователей.
Покрытие включает проверку положительных сценариев и обработку исключений.

## Интеграционные тесты DAO
Для тестирования DAO-слоя применены интеграционные тесты с использованием Testcontainers.
Testcontainers автоматически поднимает временный контейнер с PostgreSQL, обеспечивая чистое и изолированное окружение для тестов с реальной базой данных.
Интеграционные тесты проверяют корректность операций с базой данных: сохранение, обновление, удаление и выборку пользователей.

В рамках интеграционных тестов реализован специальный класс HibernateUtilTest с возможностью динамической конфигурации подключения к базе через параметры контейнера.
Для поддержания изоляции тесты очищают таблицы или пересоздают базу между запусками, исключая влияние состояния одного теста на другой.

## Используемые технологии и зависимости
- JUnit 5 для тестирования

- Mockito для создания моков и изоляции сервисного слоя

- Testcontainers для интеграционных тестов с Docker-контейнером PostgreSQL

- BOM testcontainers-bom для управления версиями зависимостей Testcontainers

## Запуск тестов
- Для интеграционных тестов требуется установленный и запущенный Docker (Testcontainers автоматически создаст и удалит PostgreSQL контейнер).

- Юнит-тесты запускаются без дополнительных настроек и могут выполняться локально или в CI.


## Пример работы приложения

```console
1. Add User
2. Edit User
3. Delete User
4. Show User
5. Show list of all Users
0. Exit

Select option
> 1
Enter name: John Doe
Enter Email: john.doe@example.com
Enter age: 30
User added successfully
```



## Контакты

**Автор:** Naragas  
**GitHub:** [https://github.com/Naragas](https://github.com/Naragas)
